<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω S√°ch - HKD STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin: 0; padding: 0; color: #333; }
        .navbar { background-color: #6F4E37; color: white; padding: 15px 0; }
        .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { font-size: 24px; font-weight: bold; display: flex; align-items: center; }
        .logo i { margin-right: 10px; }
        .container { max-width: 1200px; margin: 20px auto; background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; color: #6F4E37; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        table th { background-color: #6F4E37; color: white; }
        form { margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; }
        .delete-btn { background: #d9534f; color: white; text-decoration: none; padding: 5px 8px; border-radius: 4px; }
        .delete-btn:hover { background: #c9302c; }
        .edit-btn { background: #3498db; color: white; text-decoration: none; padding: 5px 8px; border-radius: 4px; }
        .edit-btn:hover { background: #2980b9; }
        .back-btn { display: inline-block; margin-top: 20px; background: #6F4E37; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; }
        .back-btn:hover { background: #5a3c2a; }
        .search-bar { margin-bottom: 20px; display: flex; gap: 10px; max-width: 400px; }
        .search-bar input { flex: 1; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
        .add-btn { background: #6F4E37; color: white; }
    </style>
</head>
<body>

<div class="navbar">
    <div class="nav-container">
        <div class="logo"><i class="fas fa-book"></i> Qu·∫£n l√Ω S√°ch</div>
    </div>
</div>

<div class="container">
    <h1>Danh S√°ch S√°ch</h1>

    <!-- T√¨m ki·∫øm -->
    <div class="search-bar">
        <input type="text" id="searchKeyword" placeholder="Nh·∫≠p t√™n s√°ch ho·∫∑c t√°c gi·∫£...">
        <button type="button" class="add-btn" onclick="timSach()">üîç T√¨m ki·∫øm</button>
    </div>

    <!-- B·∫£ng -->
    <table>
        <thead>
            <tr>
                <th>M√£ S√°ch</th>
                <th>T√™n S√°ch</th>
                <th>T√°c Gi·∫£</th>
                <th>Gi√°</th>
                <th>S·ªë L∆∞·ª£ng</th>
                <th>H√†nh ƒë·ªông</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <h2>Th√™m / S·ª≠a S√°ch</h2>
    <form id="formSach">
        <input type="text" id="maSach" placeholder="M√£ S√°ch" required>
        <input type="text" id="tenSach" placeholder="T√™n S√°ch" required>
        <input type="text" id="tacGia" placeholder="T√°c Gi·∫£" required>
        <input type="number" id="gia" placeholder="Gi√°" required>
        <input type="number" id="soLuong" placeholder="S·ªë L∆∞·ª£ng" required>
        <button type="submit" class="add-btn">‚ûï L∆∞u S√°ch</button>
    </form>

    <!-- N√∫t quay l·∫°i ƒë√£ s·ª≠a -->
    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Quay l·∫°i</a>
</div>

<script>
const tableBody = document.getElementById('tableBody');
const form = document.getElementById('formSach');
const maSachInput = document.getElementById('maSach');
const tenInput = document.getElementById('tenSach');
const tacGiaInput = document.getElementById('tacGia');
const giaInput = document.getElementById('gia');
const soLuongInput = document.getElementById('soLuong');

// Load d·ªØ li·ªáu t·ª´ localStorage ho·∫∑c t·∫°o v√≠ d·ª•
let danhSachSach = JSON.parse(localStorage.getItem('danhSachSach')) || [
    {maSach: 'BK001', ten: 'ƒê·∫Øc nh√¢n t√¢m', tacGia: 'Dale Carnegie', gia: 120000, soLuong: 50},
    {maSach: 'BK002', ten: 'Nh√† gi·∫£ kim', tacGia: 'Paulo Coelho', gia: 95000, soLuong: 75},
    {maSach: 'BK003', ten: 'Hai s·ªë ph·∫≠n', tacGia: 'Jeffrey Archer', gia: 150000, soLuong: 30}
];

// Render b·∫£ng
function renderTable(ds){
    tableBody.innerHTML = '';
    if(ds.length === 0){
        tableBody.innerHTML = '<tr><td colspan="6" class="text-center">Ch∆∞a c√≥ s√°ch n√†o</td></tr>';
        return;
    }
    ds.forEach(sach => {
        const tr = document.createElement('tr');
        tr.setAttribute('data-masach', sach.maSach);
        tr.innerHTML = `
            <td>${sach.maSach}</td>
            <td>${sach.ten}</td>
            <td>${sach.tacGia}</td>
            <td>${sach.gia}</td>
            <td>${sach.soLuong}</td>
            <td>
                <button class="edit-btn" onclick="suaSach('${sach.maSach}')">‚úçÔ∏è S·ª≠a</button>
                <button class="delete-btn" onclick="xoaSach('${sach.maSach}')">üóëÔ∏è X√≥a</button>
            </td>
        `;
        tableBody.appendChild(tr);
    });
    localStorage.setItem('danhSachSach', JSON.stringify(danhSachSach));
}

// Th√™m / S·ª≠a s√°ch
form.addEventListener('submit', e=>{
    e.preventDefault();
    const maSach = maSachInput.value.trim();
    const ten = tenInput.value.trim();
    const tacGia = tacGiaInput.value.trim();
    const gia = parseFloat(giaInput.value);
    const soLuong = parseInt(soLuongInput.value);

    if(!maSach || !ten || !tacGia || isNaN(gia) || isNaN(soLuong)){
        alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin h·ª£p l·ªá');
        return;
    }

    const existing = danhSachSach.find(s => s.maSach === maSach);
    if(existing){
        existing.ten = ten;
        existing.tacGia = tacGia;
        existing.gia = gia;
        existing.soLuong = soLuong;
    } else {
        danhSachSach.push({maSach, ten, tacGia, gia, soLuong});
    }

    renderTable(danhSachSach);
    form.reset();
});

// X√≥a s√°ch
function xoaSach(ma){
    if(!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s√°ch n√†y?')) return;
    danhSachSach = danhSachSach.filter(s => s.maSach !== ma);
    renderTable(danhSachSach);
}

// S·ª≠a s√°ch
function suaSach(ma){
    const sach = danhSachSach.find(s => s.maSach === ma);
    if(sach){
        maSachInput.value = sach.maSach;
        tenInput.value = sach.ten;
        tacGiaInput.value = sach.tacGia;
        giaInput.value = sach.gia;
        soLuongInput.value = sach.soLuong;
    }
}

// T√¨m ki·∫øm
function timSach(){
    const kw = document.getElementById('searchKeyword').value.toLowerCase();
    const filtered = danhSachSach.filter(s => 
        s.ten.toLowerCase().includes(kw) || s.tacGia.toLowerCase().includes(kw)
    );
    renderTable(filtered);
}

// Render l·∫ßn ƒë·∫ßu
renderTable(danhSachSach);
</script>

</body>
</html>
