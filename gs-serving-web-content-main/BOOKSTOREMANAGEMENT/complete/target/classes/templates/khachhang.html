<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω Kh√°ch H√†ng - HKD STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin: 0; padding: 0; color: #333; }
        .navbar { background-color: #6F4E37; color: white; padding: 15px 0; }
        .nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .logo { font-size: 24px; font-weight: bold; display: flex; align-items: center; }
        .logo i { margin-right: 10px; }
        .container { max-width: 1200px; margin: 20px auto; background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        h1, h2 { text-align: center; color: #6F4E37; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table th, table td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        table th { background-color: #6F4E37; color: white; }
        form { margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 5px; }
        button { padding: 8px 12px; border: none; border-radius: 5px; cursor: pointer; }
        .delete-btn { background: #d9534f; color: white; text-decoration: none; padding: 5px 8px; border-radius: 4px; }
        .delete-btn:hover { background: #c9302c; }
        .edit-btn { background: #3498db; color: white; text-decoration: none; padding: 5px 8px; border-radius: 4px; }
        .edit-btn:hover { background: #2980b9; }
        .back-btn { display: inline-block; margin-top: 20px; background: #6F4E37; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; }
        .back-btn:hover { background: #5a3c2a; }
        .search-bar { margin-bottom: 20px; display: flex; gap: 10px; max-width: 400px; }
        .search-bar input { flex: 1; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
        .add-btn { background: #6F4E37; color: white; }
    </style>
</head>
<body>

<div class="navbar">
    <div class="nav-container">
        <div class="logo"><i class="fas fa-users"></i> Qu·∫£n l√Ω Kh√°ch H√†ng</div>
    </div>
</div>

<div class="container">
    <h1>Danh S√°ch Kh√°ch H√†ng</h1>

    <div class="search-bar">
        <input type="text" id="searchKeyword" placeholder="Nh·∫≠p t√™n ho·∫∑c s·ªë ƒëi·ªán tho·∫°i...">
        <button type="button" class="add-btn" onclick="timKhachHang()">üîç T√¨m ki·∫øm</button>
    </div>

    <table>
        <thead>
            <tr>
                <th>M√£ KH</th>
                <th>T√™n Kh√°ch H√†ng</th>
                <th>S·ªë ƒêi·ªán Tho·∫°i</th>
                <th>Email</th>
                <th>ƒê·ªãa Ch·ªâ</th>
                <th>H√†nh ƒê·ªông</th>
            </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
    </table>

    <h2>Th√™m / S·ª≠a Kh√°ch H√†ng</h2>
    <form id="formKhachHang">
        <input type="text" id="maKH" placeholder="M√£ KH" required>
        <input type="text" id="ten" placeholder="T√™n Kh√°ch H√†ng" required>
        <input type="text" id="sdt" placeholder="S·ªë ƒêi·ªán Tho·∫°i" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="text" id="diaChi" placeholder="ƒê·ªãa Ch·ªâ" required>
        <button type="submit" class="add-btn">‚ûï L∆∞u Kh√°ch H√†ng</button>
    </form>

    <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Quay l·∫°i</a>
</div>

<script>
const tableBody = document.getElementById('tableBody');
const form = document.getElementById('formKhachHang');
const maKHInput = document.getElementById('maKH');
const tenInput = document.getElementById('ten');
const sdtInput = document.getElementById('sdt');
const emailInput = document.getElementById('email');
const diaChiInput = document.getElementById('diaChi');

// D·ªØ li·ªáu v√≠ d·ª•
let danhSachKhachHang = [
    {maKH:'KH001', ten:'Nguy·ªÖn VƒÉn A', sdt:'0912345678', email:'a@gmail.com', diaChi:'H√† N·ªôi'},
    {maKH:'KH002', ten:'Tr·∫ßn Th·ªã B', sdt:'0987654321', email:'b@gmail.com', diaChi:'H·∫£i Ph√≤ng'},
    {maKH:'KH003', ten:'L√™ VƒÉn C', sdt:'0909123456', email:'c@gmail.com', diaChi:'ƒê√† N·∫µng'}
];

// L∆∞u v√†o localStorage
function luuLocalStorage(){
    localStorage.setItem('danhSachKhachHang', JSON.stringify(danhSachKhachHang));
}

// Load d·ªØ li·ªáu t·ª´ localStorage
function loadLocalStorage(){
    const data = localStorage.getItem('danhSachKhachHang');
    if(data){
        danhSachKhachHang = JSON.parse(data);
    }
}

// Render b·∫£ng
function renderTable(ds){
    tableBody.innerHTML = '';
    if(ds.length === 0){
        tableBody.innerHTML = '<tr><td colspan="6" class="text-center">Ch∆∞a c√≥ kh√°ch h√†ng n√†o</td></tr>';
        return;
    }
    ds.forEach(kh => {
        const tr = document.createElement('tr');
        tr.setAttribute('data-makh', kh.maKH);
        tr.innerHTML = `
            <td>${kh.maKH}</td>
            <td>${kh.ten}</td>
            <td>${kh.sdt}</td>
            <td>${kh.email}</td>
            <td>${kh.diaChi}</td>
            <td>
                <button class="edit-btn" onclick="suaKhachHang('${kh.maKH}')">‚úçÔ∏è S·ª≠a</button>
                <button class="delete-btn" onclick="xoaKhachHang('${kh.maKH}')">üóëÔ∏è X√≥a</button>
            </td>
        `;
        tableBody.appendChild(tr);
    });
}

// Th√™m / S·ª≠a
form.addEventListener('submit', e=>{
    e.preventDefault();
    const maKH = maKHInput.value.trim();
    const ten = tenInput.value.trim();
    const sdt = sdtInput.value.trim();
    const email = emailInput.value.trim();
    const diaChi = diaChiInput.value.trim();

    if(!maKH || !ten || !sdt || !email || !diaChi){
        alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin');
        return;
    }

    const existing = danhSachKhachHang.find(k => k.maKH === maKH);
    if(existing){
        existing.ten = ten;
        existing.sdt = sdt;
        existing.email = email;
        existing.diaChi = diaChi;
    } else {
        danhSachKhachHang.push({maKH, ten, sdt, email, diaChi});
    }

    luuLocalStorage();
    renderTable(danhSachKhachHang);
    form.reset();
});

// X√≥a
function xoaKhachHang(ma){
    if(!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a kh√°ch h√†ng n√†y?')) return;
    danhSachKhachHang = danhSachKhachHang.filter(k => k.maKH !== ma);
    luuLocalStorage();
    renderTable(danhSachKhachHang);
}

// S·ª≠a (ƒë∆∞a d·ªØ li·ªáu v√†o form)
function suaKhachHang(ma){
    const kh = danhSachKhachHang.find(k => k.maKH === ma);
    if(kh){
        maKHInput.value = kh.maKH;
        tenInput.value = kh.ten;
        sdtInput.value = kh.sdt;
        emailInput.value = kh.email;
        diaChiInput.value = kh.diaChi;
    }
}

// T√¨m ki·∫øm front-end
function timKhachHang(){
    const kw = document.getElementById('searchKeyword').value.toLowerCase();
    const filtered = danhSachKhachHang.filter(k => 
        k.ten.toLowerCase().includes(kw) || k.sdt.includes(kw)
    );
    renderTable(filtered);
}

// Kh·ªüi t·∫°o
loadLocalStorage();
renderTable(danhSachKhachHang);
</script>

</body>
</html>
